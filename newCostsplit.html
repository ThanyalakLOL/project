<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GOING DUTCH</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="newCostsplit.css">
</head>

<body>
    <nav class="navbar navbar-expand-sm navbar-dark bg-dark">
        <div class="container">
            <a href="index.html" class="navbar-brand">GOING DUTCH</a>
            <button class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar1">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div id="navbar1" class="collapse navbar-collapse">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a href="index.html" class="nav-link">HOME</a>
                    </li>
                    <li class="nav-item">
                        <a href="#service" class="nav-link">COST SPLIT</a>
                    </li>
                    <li class="nav-item">
                        <a href="#about" class="nav-link">USER</a>
                    </li>
                    <li class="nav-item">
                        <a href="#about" class="nav-link">LOG OUT</a>
                    </li>
                </ul>
            </div>
        </div>
        </div>
    </nav>
    <div class="container bg-danger my-5 p-5" id="costsplitArea">
        <div class="mainmenu">
            <form action=" "></form>
            <div class="order">
                <label class="fs-7">
                    order
                </label>
                <input type="text" id="ordername" class="form-control fs-7 h-25 w-100 new-font" placeholder="order...">
            </div>
            <div class="totolPrice">
                <label class="fs-7">
                    total price
                </label>
                <input type="number" class="form-control fs-7 h-25" placeholder="total price..." id="total_price"
                    oninput="MyNumberType()">
            </div>
            <div class="num-member">
                <label class="fs-7">
                    number of person
                </label>
                <div class="fs-7" id="peoplesize">
                    0
                </div>
            </div>
            <div class="price/person">
                <label class="fs-7">
                    price/person
                </label>
                <div class="fs-7" id="price_person">
                    0
                </div>
            </div>
            <div class="name">
                <label class="fs-7">
                    name
                </label>
                <div class="fs-7" id="peoplename" value>
                    <ul id="show"></ul>
                </div>
            </div>
            <div class="addName">
                <input type="text" id="typename" class="form-control fs-7 h-25" placeholder="name..." list="peoplename"
                    value="">
                <!-- <button class="" onclick="AddData(document.getElementById('typename').value)" >add</button> -->
                <button class="d-inline" onclick="addName()">add</button>
            </div>
            <button class="bg-danger d-inline" onclick="ResetButton()">Reset</button>
        </div>
        <div><button class="d-inline" onclick="addNewDebtor()">save</button></div>
    </div>

    <script src="script.js"></script>

    <script src="https://www.gstatic.com/firebasejs/8.4.2/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.4.2/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.4.2/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.4.2/firebase-functions.js"></script>


    <!-- TODO: Add SDKs for Firebase products that you want to use
       https://firebase.google.com/docs/web/setup#available-libraries -->
    <script src="https://www.gstatic.com/firebasejs/8.4.2/firebase-analytics.js"></script>

    <script>
        var user = firebase.auth().currentUser;

        if (user != null) {
        user.providerData.forEach(function (profile) {
        console.log("Sign-in provider: " + profile.providerId);
        console.log("  Provider-specific UID: " + profile.uid);
        console.log("  Name: " + profile.displayName);
        console.log("  Email: " + profile.email);
        console.log("  Photo URL: " + profile.photoURL);
        });
        }
        
        if(document.getElementById("typename").value != ""){
            var data = [{email: 'a',cost:10}, {email: 'b' , cost:4}]            
        }

        var firebaseConfig = {
            apiKey: "AIzaSyDXyhsZrqCyW4PLcnhjSn6BL5vW51zfFPk",
            authDomain: "goingdutch2-2665e.firebaseapp.com",
            projectId: "goingdutch2-2665e",
            storageBucket: "goingdutch2-2665e.appspot.com",
            messagingSenderId: "304127427663",
            appId: "1:304127427663:web:f1440e40b340929996163a",
            measurementId: "G-S06KQ9ZDTN"
        };
        // Initialize Firebase
        var app = firebase.initializeApp(firebaseConfig);
        var db = firebase.firestore(app);

        async function getMarkers() { // get data
            const user = await firebase.firestore().collection('user')
            const snapshot = await user.get()
            console.log('snapshot>>>>', snapshot)
            const tempDoc = snapshot.docs.map((doc) => {
                const userData = {id: doc.id}
                return {userData}
            })

            console.log(tempDoc)
        }
        getMarkers()

        function addNewDebtor() {   // add data
            db.collection("session").add({
                order : "test", 
                creditor: "a@mail.com",
                debtor: data
            })
                .then((docRef) => {
                    console.log("Document written with ID: ", docRef.id);
                })
                .catch((error) => {
                    console.error("Error adding document: ", error);
                });
        }


        // var docRef = db.collection("user").doc("a@mail.com");

        // docRef.get().then((doc) => {
        //     if (doc.exists) {
        //         console.log("Document data:", doc.data());
        //     } else {
        //         // doc.data() will be undefined in this case
        //         console.log("No such document!");
        //     }
        // }).catch((error) => {
        //     console.log("Error getting document:", error);
        // });


    </script>
</body>

</html>